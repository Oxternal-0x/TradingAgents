#!/usr/bin/env python3
"""
Quick Telegram Setup Guide - Non-Interactive
Shows you exactly how to set up Telegram alerts step by step.
"""

def show_telegram_bot_creation():
    print("ğŸ“± Telegram Bot Creation Guide")
    print("=" * 40)
    print()
    print("ğŸ¤– Step 1: Create Your Telegram Bot")
    print("-" * 35)
    print("1. Open Telegram app on your phone or computer")
    print("2. Search for '@BotFather' and start a chat")
    print("3. Send this command: /newbot")
    print("4. BotFather will ask for a name - enter: MyTradingBot")
    print("5. BotFather will ask for a username - enter: mytradingalerts_bot")
    print("   (Must end with 'bot' and be unique)")
    print("6. BotFather will give you a token like:")
    print("   ğŸ“‹ 123456789:ABCdefGHIjklMNOpqrsTUVwxyz")
    print("7. ğŸ”‘ COPY THIS TOKEN - you'll need it!")

def show_chat_id_instructions():
    print("\nğŸ’¬ Step 2: Get Your Chat ID")
    print("-" * 30)
    print("1. Click the link BotFather provides to start a chat with your bot")
    print("2. Send any message to your bot (example: 'Hello')")
    print("3. To find your chat ID, visit this URL in your browser:")
    print("   https://api.telegram.org/bot[YOUR_BOT_TOKEN]/getUpdates")
    print("   (Replace [YOUR_BOT_TOKEN] with your actual token)")
    print("4. Look for 'chat':{'id': YOUR_CHAT_ID}")
    print("5. ğŸ“‹ COPY the chat ID number")

def show_config_template():
    print("\nâš™ï¸ Step 3: Create Configuration")
    print("-" * 35)
    print("Create a file called 'my_telegram_config.py' with this content:")
    print()
    print("```python")
    print("#!/usr/bin/env python3")
    print('"""')
    print("My Telegram Alert Configuration")
    print('"""')
    print()
    print("# Replace these with your actual credentials")
    print('BOT_TOKEN = "123456789:ABCdefGHIjklMNOpqrsTUVwxyz"  # Your bot token')
    print('CHAT_ID = "123456789"  # Your chat ID')
    print()
    print("# Telegram alert configuration")
    print("TELEGRAM_CONFIG = {")
    print('    "alerts_enabled": True,')
    print('    "alert_on_decisions": ["BUY", "SELL"],')
    print('    "notification_handlers": {')
    print('        "telegram": {')
    print('            "enabled": True,')
    print('            "bot_token": BOT_TOKEN,')
    print('            "chat_id": CHAT_ID,')
    print('            "parse_mode": "Markdown",')
    print('            "disable_notification": False,')
    print("        }")
    print("    }")
    print("}")
    print("```")

def show_test_script():
    print("\nğŸ§ª Step 4: Test Your Setup")
    print("-" * 30)
    print("Create a file called 'test_my_telegram.py' with this content:")
    print()
    print("```python")
    print("#!/usr/bin/env python3")
    print("import requests")
    print("from datetime import datetime")
    print()
    print("# Your credentials (replace with actual values)")
    print('bot_token = "123456789:ABCdefGHIjklMNOpqrsTUVwxyz"')
    print('chat_id = "123456789"')
    print()
    print("def test_telegram():")
    print('    print("ğŸ§ª Testing Telegram Bot...")')
    print("    ")
    print("    # Test message")
    print('    message = "ğŸš¨ *Test Alert*\\n\\nğŸ“Š Your trading bot is working!"')
    print("    ")
    print('    url = f"https://api.telegram.org/bot{bot_token}/sendMessage"')
    print("    payload = {")
    print('        "chat_id": chat_id,')
    print('        "text": message,')
    print('        "parse_mode": "Markdown"')
    print("    }")
    print("    ")
    print("    try:")
    print("        response = requests.post(url, json=payload)")
    print("        if response.status_code == 200:")
    print('            print("âœ… Test message sent! Check your Telegram")')
    print("        else:")
    print('            print(f"âŒ Error: {response.text}")')
    print("    except Exception as e:")
    print('        print(f"âŒ Failed: {e}")')
    print()
    print('if __name__ == "__main__":')
    print("    test_telegram()")
    print("```")

def show_integration_steps():
    print("\nğŸ”— Step 5: Integration with Trading System")
    print("-" * 45)
    print("1. Save your configuration file as 'my_telegram_config.py'")
    print("2. Test it with: python3 test_my_telegram.py")
    print("3. Once working, update your main trading configuration:")
    print()
    print("In your main trading script, use:")
    print("```python")
    print("from my_telegram_config import TELEGRAM_CONFIG")
    print("config['alert_config'] = TELEGRAM_CONFIG")
    print("```")

def show_troubleshooting():
    print("\nğŸ”§ Common Issues & Solutions")
    print("-" * 35)
    print("âŒ 'Bot token not found'")
    print("   â†’ Make sure you copied the full token from BotFather")
    print("   â†’ Token should be about 45 characters long")
    print()
    print("âŒ 'Chat not found'")
    print("   â†’ Send a message to your bot first")
    print("   â†’ Check the getUpdates URL returns data")
    print()
    print("âŒ 'Unauthorized'")
    print("   â†’ Verify bot token is correct")
    print("   â†’ Make sure you didn't delete the bot")
    print()
    print("âŒ 'Bad Request'")
    print("   â†’ Check your chat ID is a number")
    print("   â†’ Verify message format is correct")

def show_sample_alert():
    print("\nğŸ“± What Your Alerts Will Look Like")
    print("-" * 40)
    print("ğŸŸ¢ğŸ“ˆ *BUY Signal*")
    print()
    print("ğŸ“Š *Ticker:* `AAPL`")
    print("ğŸ“… *Date:* 2025-06-27")
    print("ğŸ’­ *Summary:* Strong bullish signals detected")
    print()
    print("ğŸ“ˆ *Analysis Details:*")
    print("ğŸ¯ Target: `$185.00`")
    print("ğŸ›‘ Stop Loss: `$165.00`")
    print("ğŸ“Š Confidence: `85%`")
    print("ğŸ”§ Technical: RSI oversold, MACD bullish crossover")
    print()
    print("â° *Alert Time:* 14:30:22 UTC")
    print("ğŸ¤– *Trading Agents Alert System*")

def main():
    print("ğŸ“± Telegram Alert Setup - Step by Step Guide")
    print("=" * 55)
    print("This guide will help you set up Telegram alerts manually.")
    print()
    
    show_telegram_bot_creation()
    show_chat_id_instructions()
    show_config_template()
    show_test_script()
    show_integration_steps()
    show_troubleshooting()
    show_sample_alert()
    
    print("\nğŸ‰ Setup Complete!")
    print("=" * 20)
    print("Once you've followed all steps:")
    print("1. âœ… Created your bot with BotFather")
    print("2. âœ… Got your bot token and chat ID")
    print("3. âœ… Created and tested configuration")
    print("4. âœ… Integrated with trading system")
    print()
    print("You'll receive instant Telegram alerts for all trading signals! ğŸš€")
    
    print("\nğŸ“‹ Quick Links:")
    print("â€¢ BotFather: https://t.me/botfather")
    print("â€¢ Test your bot: python3 test_my_telegram.py")
    print("â€¢ Full system test: python3 test_personal_alerts.py")

if __name__ == "__main__":
    main()